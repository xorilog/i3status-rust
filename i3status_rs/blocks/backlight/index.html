<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The brightness of a backlight device"><title>i3status_rs::blocks::backlight - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="i3status_rs" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0 (07dca489a 2024-02-04)" data-channel="1.76.0" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../i3status_rs/index.html">i3status_rs</a><span class="version">0.33.0</span></h2></div><h2 class="location"><a href="#">Module backlight</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In i3status_rs::blocks</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../i3status_rs/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">i3status_rs</a>::<wbr><a href="../index.html">blocks</a>::<wbr><a class="mod" href="#">backlight</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/i3status_rs/blocks/backlight.rs.html#1-241">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The brightness of a backlight device</p>
<p>This block reads brightness information directly from the filesystem, so it works under both
X11 and Wayland. The block uses <code>inotify</code> to listen for changes in the device’s brightness
directly, so there is no need to set an update interval. This block uses DBus to set brightness
level using the mouse wheel, but will <a href="#d-bus-fallback">fallback to sysfs</a> if <code>systemd-logind</code> is not used.</p>
<h2 id="root-scaling"><a href="#root-scaling">Root scaling</a></h2>
<p>Some devices expose raw values that are best handled with nonlinear scaling. The human perception of lightness is close to the cube root of relative luminance, so settings for <code>root_scaling</code> between 2.4 and 3.0 are worth trying. For devices with few discrete steps this should be 1.0 (linear). More information: <a href="https://en.wikipedia.org/wiki/Lightness">https://en.wikipedia.org/wiki/Lightness</a></p>
<h2 id="configuration"><a href="#configuration">Configuration</a></h2><div><table><thead><tr><th>Key</th><th>Values</th><th>Default</th></tr></thead><tbody>
<tr><td><code>device</code></td><td>A regex to match against <code>/sys/class/backlight</code> devices to read brightness information from (can match 1 or more devices). When there is no <code>device</code> specified, this block will display information for all devices found in the <code>/sys/class/backlight</code> directory.</td><td>Default device</td></tr>
<tr><td><code>format</code></td><td>A string to customise the output of this block. See below for available placeholders.</td><td><code>&quot; $icon $brightness &quot;</code></td></tr>
<tr><td><code>missing_format</code></td><td>A string to customise the output of this block. No placeholders available</td><td><code>&quot; no backlight devices &quot;</code></td></tr>
<tr><td><code>step_width</code></td><td>The brightness increment to use when scrolling, in percent</td><td><code>5</code></td></tr>
<tr><td><code>minimum</code></td><td>The minimum brightness that can be scrolled down to</td><td><code>5</code></td></tr>
<tr><td><code>maximum</code></td><td>The maximum brightness that can be scrolled up to</td><td><code>100</code></td></tr>
<tr><td><code>cycle</code></td><td>The brightnesses to cycle through on each click</td><td><code>[minimum, maximum]</code></td></tr>
<tr><td><code>root_scaling</code></td><td>Scaling exponent reciprocal (ie. root)</td><td><code>1.0</code></td></tr>
<tr><td><code>invert_icons</code></td><td>Invert icons’ ordering, useful if you have colorful emoji</td><td><code>false</code></td></tr>
<tr><td><code>ddcci_sleep_multiplier</code></td><td><a href="https://www.ddcutil.com/performance_options/#option-sleep-multiplier">See ddcutil documentation</a></td><td><code>1.0</code></td></tr>
<tr><td><code>ddcci_max_tries_write_read</code></td><td>The maximum number of times to attempt writing to  or reading from a ddcci monitor</td><td><code>10</code></td></tr>
</tbody></table>
</div><div><table><thead><tr><th>Placeholder</th><th>Value</th><th>Type</th><th>Unit</th></tr></thead><tbody>
<tr><td><code>icon</code></td><td>Icon based on backlight’s state</td><td>Icon</td><td>-</td></tr>
<tr><td><code>brightness</code></td><td>Current brightness</td><td>Number</td><td>%</td></tr>
</tbody></table>
</div><div><table><thead><tr><th>Action</th><th>Default button</th></tr></thead><tbody>
<tr><td><code>cycle</code></td><td>Left</td></tr>
<tr><td><code>brightness_up</code></td><td>Wheel Up</td></tr>
<tr><td><code>brightness_down</code></td><td>Wheel Down</td></tr>
</tbody></table>
</div><h2 id="example"><a href="#example">Example</a></h2><div class="example-wrap"><pre class="language-toml"><code>[[block]]
block = &quot;backlight&quot;
device = &quot;intel_backlight&quot;
</code></pre></div>
<p>Hide missing backlight:</p>
<div class="example-wrap"><pre class="language-toml"><code>[[block]]
block = &quot;backlight&quot;
missing_format = &quot;&quot;
</code></pre></div><h2 id="calibright"><a href="#calibright">calibright</a></h2>
<p>Additional display brightness calibration can be set in <code>$XDG_CONFIG_HOME/calibright/config.toml</code>
See <a href="https://github.com/bim9262/calibright">https://github.com/bim9262/calibright</a> for more details.
This block will override any global config set in <code>$XDG_CONFIG_HOME/calibright/config.toml</code></p>
<h2 id="d-bus-fallback"><a href="#d-bus-fallback">D-Bus Fallback</a></h2>
<p>If you don’t use <code>systemd-logind</code> i3status-rust will attempt to set the brightness
using sysfs. In order to do this you’ll need to have write permission.
You can do this by writing a <code>udev</code> rule for your system.</p>
<p>First, check that your user is a member of the “video” group using the
<code>groups</code> command. Then add a rule in the <code>/etc/udev/rules.d/</code> directory
containing the following, for example in <code>backlight.rules</code>:</p>
<div class="example-wrap"><pre class="language-text"><code>ACTION==&quot;add&quot;, SUBSYSTEM==&quot;backlight&quot;, GROUP=&quot;video&quot;, MODE=&quot;0664&quot;
</code></pre></div>
<p>This will allow the video group to modify all backlight devices. You will
also need to restart for this rule to take effect.</p>
<h2 id="icons-used"><a href="#icons-used">Icons Used</a></h2>
<ul>
<li><code>backlight</code> (as a progression)</li>
</ul>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Config.html" title="struct i3status_rs::blocks::backlight::Config">Config</a></div></li></ul><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.run.html" title="fn i3status_rs::blocks::backlight::run">run</a></div></li></ul></section></div></main></body></html>